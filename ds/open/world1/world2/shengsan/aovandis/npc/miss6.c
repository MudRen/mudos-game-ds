// In room077.c 便利商店
inherit NPC;
inherit SELLMAN;

void make_mark();

void create()
{
	set_name("超商女店員",({"miss"}) );
	set("long","一位年輕的小姐正親切的向您打聲招呼。\n");		
	set("age",19);
	set("level",7);
	set("race","人類");
	set("gender","女性");
	set("evil",-7);		// 邪惡度 -5 (正的表邪惡, 負表善良)
	set("exp_point",0);	// 設定強度, exp及combat_exp會參考到這個值
				// 0 <= exp_point <= 9
				// 內定值為 0 , 請依據強度來設合理的值...
	set("chat_chance",5);
	set("chat_msg",({
		(:command("say 歡迎光臨!!"):),
		(:command("smile"):),
	})	);

	set("chat_chance_combat", 60);
	set("chat_msg_combat", ({
		(: make_mark :),
	}) );
	set_skill("dodge",10);
	set_skill("block",10);
	set_skill("parry",10);
	set_skill("unarmed",10);

	set("talk_reply","喔，你要不要多買點東西阿。");

	set("sell_list",([
		__DIR__"eq/amulet9"	:10,
		__DIR__"eq/armor24"	:40,
		__DIR__"eq/boiler25"	:40,
		__DIR__"eq/belt16"	:25,
		__DIR__"eq/boots15"	:20,
		__DIR__"eq/cloth20"	:30,
		__DIR__"eq/gloves14"	:20,
		__DIR__"eq/hat12"	:20,
		__DIR__"eq/mask13"	:20,
		__DIR__"eq/pants18"	:30,
		__DIR__"eq/leggings19"	:30,
		__DIR__"eq/ring15"	:20,
		__DIR__"eq/towel14"	:20,
		__DIR__"eq/wrists20"	:35,
	]));

	setup();

	add_money("dollar",100);
}

void init() 
{
	::init();
	add_action("do_list","list");
	add_action("do_buy" ,"buy");
}

void make_mark()
{
	object *enemy, ob;
	command("say 哇！救命阿！");

	enemy = query_enemy();
	if( sizeof(enemy) ) ob = enemy[random(sizeof(enemy))];
	if(!ob) return;

	if( this_object()->query("helpready/"+ob->query("id")) )
		return;

	command("say "+ob->query("name")+"你是個魔鬼。");
	ob->add_temp("quest/aovandis",1);	// 將欺負市民的人做上標記
	this_object()->set("helpready/"+ob->query("id"),1);	// 與 id 結仇

}
