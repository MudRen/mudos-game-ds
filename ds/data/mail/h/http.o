#/obj/mailbox.c
dbase (["long":"		³o¬O¤@­Ó¥Î¨Ó±H«H¡B¦¬«Hªº«H½c¡M§A¥i¥H¥Î¥H¤U«ü¥O¨Ó³B²z§Aªº¶l¥ó¡R						mail <¬Y¤H>               ±H«Hµ¹§O¤H¡C		replymail <«H¥ó½s¸¹>      ¦^«Hµ¹µo«HªÌ¡C		forward <«H¥ó½s¸¹> <¬Y¤H> ±N¬Y«Ê«HÂà±Hµ¹§O¤H¡C		from                      ¬d¬Ý«H½c¤¤ªº«H¥ó¡C		read <«H¥ó½s¸¹>           ¾\\Åª¤@«Ê«H¥ó¡C		discard <«H¥ó½s¸¹>        ¥á±ó¤@«Ê«H¥ó¡C","owner_id":"http","id":"mailbox","no_insert":1,"name":"¨Ó¶R¤f­»¿}ªº«H½c","no_drop":1,"no_put":1,"unit":"­Ó",])
mails ({(["title":"workroom.c","text":"#include <ansi.h>#include <room.h>#include <localtime.h>string query_ips(object current_ppl);inherit ROOM;void create(){   set(\"short\", \"¿ë«Ç\");   set(\"no_clean_up\",0);           set(\"light\",1);                  set(\"exits\", ([       \"east\" : __DIR__\"room\",       \"down\" : __DIR__\"room3\"]));   set(\"objects\", ([                __DIR__\"npc/man\" : 1]));   set(\"valid_startroom\", 1);   setup();   load_object(__DIR__\"fedex_b\");}void init(){   mixed *local;   int wiz=0,WDAY;   object me = this_player();   string log_time,day,msg=\"\",login=\"\";   local = localtime(time());   WDAY = local[LT_WDAY];   // ===============½u¤Wwiz¦Cªí¦s¤Jmsg===============   msg +=HIR\"\\n¡i­»Æv¨ë¿E¤õ»¶»¶¡j\\n\\n\\t\"NOR;   foreach(object check in users())     { if(wizardp(check)) wiz++; }   foreach(object user in users())   {       if(wizardp(user))       {          if(wiz>3) msg += \"\\n\\t\";          msg += sprintf(HIW+BLK\"¡·%s(%s)\"NOR,user->query(\"name\"),user->query(\"id\"));       }       else if(environment(user))         { login += sprintf(\"%s\",query_ips(user)); }   }   if(wiz>3)     { msg += \"\\n\\n\\t\"HIY+wiz+\"P©Û¶Ò¤¤¡I¡I\\n\\n\"NOR; }   else if(wiz>1 && wiz<4)     { msg += HIY+wiz+\"P©Û¶Ò¤¤¡I¡I\\n\\n\"NOR; }   else { msg += HIY\"¤@­Ó¤H¦bÃÛ¨¤¸¨¼¯óO...\\n\\n\"NOR; }   // ===============³]©w®É¶¡===============   if(WDAY == 1) day=\"¤@\";      else if(WDAY == 2) day=\"¤G\";      else if(WDAY == 3) day=\"¤T\";      else if(WDAY == 4) day=\"¥|\";      else if(WDAY == 5) day=\"¤­\";      else if(WDAY == 6) day=\"¤»\";      else if(WDAY == 0) day=\"¤é\";   log_time = sprintf(\"¡i\"HIW\"%d¦~%d¤ë%d¤é ¬P´Á%s\"BLK\" %d:\"HIW+BLK\"%d\"NOR\"¡j\\n\",          local[LT_YEAR]-1911,local[LT_MON]+1,local[LT_MDAY],          day,local[LT_HOUR],local[LT_MIN]);   if(userp(me) && geteuid(me) != \"fedex\")     { write_file(\"/u/f/fedex/home.log\",sprintf(\"%s(%s) /u/f/fedex/workroom %s\",me->name(1),geteuid(me),log_time)); }   set(\"long\",msg+login);   add_action(\"do_look\", \"look\");   return;}string query_ips(object current_ppl){    // ===============¤ñ¹ïIP===============    // ­«´_ªºname¤Îid§ï¤£±¼¡A°®¯Üª½±µreturnµ¹login    string ip,temp_ip;    int i;    if(!ip = query_ip_number(current_ppl)) \"µL\";    foreach(object ob in users())    {       if(!wizardp(ob))       {          if(ob == current_ppl) continue;            temp_ip = query_ip_number(ob);           if( ip == temp_ip )            return \"\\t\"HIM+ob->name(1)+\"(\"+ob->query(\"id\")+\")¨Ï¥Î\"HIR\"[Multi-login]\"HIM\"¡A¤@Áy·Q¥[¤Jªº¼Ë¤l...\\n\\n\"NOR;       }    }    return \"\";}int do_look(string arg){   if(arg == \"down\")   return 1;}[0m","to":"http","from":"¦Ñº~±À¨®(www)","time":1114064385,]),})
last_read_time 1114064385
